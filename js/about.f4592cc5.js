(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"1a33":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",[t.getUserState.isAuthorized?s("b-col",{attrs:{cols:"12"}},[s("b-row",{staticClass:"mb-3",attrs:{"align-v":"end"}},[s("b-col",{staticClass:"mb-3",attrs:{md:"6"}},[s("h1",{staticClass:"mt-50"},[t._v("Список задач")]),s("b-form-select",{staticClass:"mb-3 mb-md-0",model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.options,(function(e){return s("b-form-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.text)+" ("+t._s(t.taskCounter(e.value))+")")])})),1)],1),s("b-col",{staticClass:"d-flex justify-content-center justify-content-md-end mb-3",attrs:{md:"6"}},[s("b-button",{attrs:{to:"/create",variant:"success",size:"lg"}},[t._v("Добавить задачу")]),s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-3",attrs:{title:"Обновить список",disabled:t.preload,variant:"outline-dark",size:"lg"},on:{click:t.updateTasks}},[s("b-icon",{staticStyle:{width:"20px",height:"20px",cursor:"pointer"},attrs:{icon:"arrow-repeat"}})],1)],1),s("div",{staticClass:"col-12"},[s("b-modal",{attrs:{id:"modal-1",title:"Удаление задачи"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.ok,r=e.cancel;return[s("b",[t._v("Custom Footer")]),s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return a()}}},[t._v(" Удалить ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return r()}}},[t._v(" Отмена ")])]}}])}),0==t.tasks.length?s("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("В списке пока еще нет задач. Вы можете "),s("b-link",{attrs:{to:"/create"}},[t._v("создать")]),t._v(" задачу. ")],1):s("b-table",{attrs:{stacked:"lg",items:t.items,fields:t.fields,id:"my-table","per-page":t.perPage,"current-page":t.currentPage},scopedSlots:t._u([{key:"cell(Название)",fn:function(e){return[s("h5",{domProps:{innerHTML:t._s(e.value)}})]}},{key:"cell(Окончание)",fn:function(e){return[s("div",{domProps:{innerHTML:t._s(e.value)}})]}},{key:"cell(Описание)",fn:function(e){return[s("div",{staticClass:"trim-dotted"},[s("p",{domProps:{textContent:t._s(e.value)}})])]}},{key:"cell(Стаус)",fn:function(e){return[s("div",{staticClass:"alert",class:"alert-"+t.taskStatusMessages[e.value].selector,attrs:{role:"alert","aria-live":"polite","aria-atomic":"true"}},[t._v(t._s(t.taskStatusMessages[e.value].name))])]}},{key:"cell(Редактирование)",fn:function(e){return[s("router-link",{staticClass:"btn btn-secondary",attrs:{tag:"button",to:"/task/"+e.value,size:"sm"}},[t._v("Открыть")])]}},{key:"cell(Удаление)",fn:function(e){return[s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"del-button",attrs:{title:"Удалить задачу"},on:{click:function(s){return t.removeConfirm(e.value)}}},[s("b-icon",{staticStyle:{width:"20px",height:"20px",cursor:"pointer"},attrs:{href:"#",icon:"x-circle-fill"}})],1)]}}])}),s("b-overlay",{attrs:{show:t.preload,rounded:"sm"}}),s("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1):s("b-col",{staticClass:"mt-5",attrs:{cols:"12"}},[s("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("Чтобы создавать и просматривать задачи, пожалуйста, "),s("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.modalSignIn",modifiers:{modalSignIn:!0}}]},[t._v("войдите")]),t._v(" или "),s("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.modalSignUp",modifiers:{modalSignUp:!0}}]},[t._v("зарегистрируйтесь.")])],1)],1)],1)},r=[],i=(s("a4d3"),s("e01a"),s("99af"),s("4de4"),s("7db0"),s("d81d"),s("5530")),n=(s("96cf"),s("1da1")),o=s("19ec"),c=s("5408"),u=s("442a"),l=s("4fcb"),d={name:"List",data:function(){return{perPage:5,currentPage:1,taskStatusMessages:c["a"],sortBy:"Окончание",sortDesc:!1,preload:!0,fields:[{key:"Название",sortable:!1},{key:"Окончание",sortable:!1},{key:"Описание",sortable:!1},{key:"Стаус",sortable:!1},{key:"Редактирование",sortable:!1},{key:"Удаление",sortable:!1}],selected:null,options:[{value:null,text:"Все"},{value:"active",text:"Активные"},{value:"completed",text:"Завершенные"},{value:"outdated",text:"Просроченные"}]}},methods:{updateTasks:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("resetPreloaderState",!0),e.next=3,t.$store.dispatch("getTasks");case 3:case"end":return e.stop()}}),e)})))()},taskCounter:function(t){return this.statusedTasks.filter((function(e){return!t||e.status===t})).length},formatedDeadline:function(t){var e=Object(o["a"])(new Date),s=Object(o["a"])(new Date(t)),a={hours:s.diff(e,"hours"),days:s.diff(e,"days"),weeks:s.diff(e,"weeks"),months:s.diff(e,"months"),years:s.diff(e,"years")};return a.years>0?"больше года":a.months>0?a.months+" месяцев":a.weeks>0?a.weeks+" недель":a.days>0?a.days+" дней":0==a.days?a.hours+" часов":void 0},removeTask:function(t){var e=this.$store.getters.getTasks.find((function(e){return e.id===t})).title;this.$store.dispatch("removeTask",t),this.makeToast(e,"remove")},removeConfirm:function(t){var e=this;this.$bvModal.msgBoxConfirm("Действительно хотите удалить задачу?",{okTitle:"Да",cancelTitle:"Отмена"}).then((function(s){s&&e.removeTask(t)})).catch((function(t){}))},countOfStatusedTasks:function(t){return this.items.filter((function(e){return e.status===t})).length}},watch:{preloaderState:function(){console.log("preloaderState is changed! "+this.preloaderState),this.preload=this.preloaderState}},computed:{preloaderState:function(){return this.$store.getters.getPreloaderState},tasks:function(){return this.$store.getters.getTasks},statusedTasks:function(){return this.dateFilteredTasks.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{status:new Date(t.date)>new Date&&"completed"!==t.status?"active":"completed"===t.status?"completed":"outdated"})}))},filteredTasks:function(){var t=this;return this.statusedTasks.filter((function(e){return!t.selected||e.status===t.selected}))},dateFilteredTasks:function(){return this.tasks.sort((function(t,e){return+new Date(t.date)-+new Date(e.date)}))},rows:function(){return this.filteredTasks.length},items:function(){var t=this;return this.filteredTasks.map((function(e,s){return{"Название":e.title,"Окончание":"outdated"!==e.status&&"completed"!==e.status?"".concat(Object(u["a"])(e.date)," <div><b>Осталось:</b> ").concat(t.formatedDeadline(Object(o["a"])(e.date)),"</div>"):Object(u["a"])(e.date),"Описание":e.description,"Стаус":e.status,"Редактирование":e.id,"Удаление":e.id}}))},getUserState:function(){return this.$store.getters.getUser}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("getTasks");case 1:case"end":return e.stop()}}),e)})))()},destroyed:function(){console.log("list destroyed"),this.$store.dispatch("resetPreloaderState",!0)},mixins:[l["a"]]},m=d,v=(s("ebb3"),s("2877")),f=Object(v["a"])(m,a,r,!1,null,null,null);e["default"]=f.exports},"1d21":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t._m(0),s("div",{staticClass:"col-md-6"},[s("b-jumbotron",[s("h1",[t._v(t._s(t.currentTask[0].title))]),s("p",[t._v(t._s(t.currentTask[0].description))]),s("h4",[t._v("Состояние "),s("b-badge",{attrs:{variant:t.taskStatusMessages[t.currentTask[0].status].selector}},[t._v(t._s(t.taskStatusMessages[t.currentTask[0].status].name))])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],staticClass:"after-end"},[s("p",{staticClass:"h1 mb-2"},[s("b-icon",{attrs:{icon:"clock-history"}})],1),s("span",{staticClass:"ml-3"},[s("b",[t._v(t._s(t.$deadline(t.currentTask[0].date)))])])])])],1),s("div",{staticClass:"col-md-6"},[s("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],attrs:{label:"Название задачи","label-for":"input-formatter"}},[s("b-form-input",{attrs:{id:"input-formatter",state:t.nameState,placeholder:"Например, Купить газету"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),s("b-form-invalid-feedback",{attrs:{id:"input-formatter-feedback"}},[t._v("Пожалуйста, введите название задачи")])],1),s("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],attrs:{label:"Описание задачи"}},[s("b-form-textarea",{attrs:{id:"textarea-formatter",placeholder:"Например, Газетный киоск открывается в 8:00"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}]},[s("label",{attrs:{for:"tags-basic"}},[t._v("Тэги")]),s("b-form-tags",{attrs:{"input-id":"tags-basic",placeholder:"Тэги, характеризующие задачу"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],staticClass:"mt-3"},[s("label",{attrs:{for:"example-datepicker"}},[t._v("Укажите дату окончания задачи")]),s("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"example-datepicker","date-disabled-fn":t.dateDisabled,placeholder:"Дата не выбрана"},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}})],1),s("b-button",{staticClass:"mr-2",attrs:{disabled:t.isCompleted,type:"button",variant:"danger"},on:{click:function(e){return e.preventDefault(),t.complete(e)}}},[t._v("Завершит задачу")]),s("Loader",{directives:[{name:"show",rawName:"v-show",value:"active"===t.currentTask[0].status,expression:"currentTask[0].status === 'active'"}],attrs:{busy:t.busy}},[s("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.isCompleted&&!t.isEdited,expression:"!isCompleted && !isEdited"}],attrs:{type:"submit",variant:"success"}},[t._v("Сохранить изменения")])],1),s("b-button",{staticClass:"ml-2",on:{click:function(e){return e.preventDefault(),t.$router.push("/")}}},[t._v("Отмена")]),s("b-alert",{directives:[{name:"show",rawName:"v-show",value:"active"!==t.currentTask[0].status,expression:"currentTask[0].status !== 'active'"}],staticClass:"mt-3",attrs:{show:"",variant:"warning"}},[t._v("Допускается редактирование только "),s("b",[t._v("активных ")]),t._v("задач")])],1)])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("h2",{staticClass:"mt-4 mb-3"},[t._v("Редактирование задачи")]),s("hr")])}],i=(s("a4d3"),s("e01a"),s("4de4"),s("d81d"),s("5530")),n=(s("96cf"),s("1da1")),o=s("5408"),c=s("4fcb"),u=s("555f"),l=(s("442a"),{name:"Task",data:function(){return{title:"",description:"",tags:[],deadline:"",status:"",taskStatusMessages:o["a"],id:"",busy:!1}},components:{Loader:u["a"]},methods:{submit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s={title:t.title,description:t.description,id:t.currentTask[0].id,status:t.status,tags:t.tags,date:t.deadline},!t.titleValidate()){e.next=8;break}return t.busy=!0,e.next=5,t.$store.dispatch("editTask",s);case 5:t.busy=!1,t.$router.push("/"),"completed"!==s.status&&t.makeToast(s.title,"edit");case 8:case"end":return e.stop()}}),e)})))()},complete:function(){this.titleValidate()&&(this.status="completed",this.submit(),this.makeToast(this.title,"finish"))},dateDisabled:function(t,e){return e<new Date},titleValidate:function(){return this.nameState}},created:function(){this.title=this.currentTask[0].title,this.description=this.currentTask[0].description,this.tags=this.currentTask[0].tags||[],this.deadline=this.currentTask[0].date,this.status=this.currentTask[0].status},computed:{currentTask:function(){var t=this;return this.$store.getters.getTasks.filter((function(e){return e.id===t.$route.params.id})).map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{tags:t.tags?t.tags:[],status:new Date(t.date)>new Date&&"completed"!==t.status?"active":"completed"===t.status?"completed":"outdated"})}))},isCompleted:function(){return"completed"===this.status},isEdited:function(){return this.title===this.currentTask[0].title&&this.description===this.currentTask[0].description&&this.tags===this.currentTask[0].tags&&this.deadline===this.currentTask[0].date&&this.status===this.currentTask[0].status},nameState:function(){return this.title.length>0}},mixins:[c["a"]]}),d=l,m=(s("2e6d"),s("2877")),v=Object(m["a"])(d,a,r,!1,null,"0d4b220d",null);e["default"]=v.exports},"2e6d":function(t,e,s){"use strict";s("67a1")},5408:function(t,e,s){"use strict";e["a"]={active:{name:"В работе",selector:"success"},completed:{name:"Завершенa",selector:"light"},outdated:{name:"Просрочена",selector:"danger"}}},"67a1":function(t,e,s){},7547:function(t,e,s){},"7db0":function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").find,i=s("44d2"),n=s("ae40"),o="find",c=!0,u=n(o);o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!u},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},ebb3:function(t,e,s){"use strict";s("7547")}}]);
//# sourceMappingURL=about.f4592cc5.js.map